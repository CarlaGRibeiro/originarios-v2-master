@model Originarios.Models.Publicacoes

@{ ViewBag.Title = "Editar Publicação"; }

<h2>@ViewBag.Title</h2>


@using (Html.BeginForm("Edit", "Publicações", FormMethod.Post, htmlAttributes: new { id = "formSalvarPost", @class = "form", role = "form" }))
{
@Html.AntiForgeryToken()
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                @Html.HiddenFor(model => model.id_post) @*Associa id do usuário logado à publicação que será editada*@
                                                @Html.HiddenFor(model => model.usuario, new { Value = @ViewBag.usuario })

                                                                <hr /> @*-------------------------- Inputs texto --------------------------*@
<div class="row">

    <div class="form-group col-12 col-sm-9">
        <label class="control-label" for="titulo">Título:</label>
        <div class="col-12 col-sm-11">
            @Html.EditorFor(model => model.titulo, new { htmlAttributes = new { id = "titulo", autofocus = "autofocus", @class = "form-control", @maxlength = "30", required = "required", dataError = "Um título é necessário." } })
            @Html.ValidationMessageFor(model => model.titulo, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-12">
        <label class="control-label" for="corpo">Texto:</label>
        <div class="col-12">
            @Html.TextAreaFor(model => model.corpo, 4, 10, htmlAttributes: new { id = "corpo", @class = "form-control", @maxlength = "5000" })
            @Html.ValidationMessageFor(model => model.corpo, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group col-12 col-sm-9">
        <label class="control-label" for="titulo">Local:</label>
        <div class="col-12 col-sm-11">
            @Html.EditorFor(model => model.locali, new { htmlAttributes = new { id = "locali", autofocus = "autofocus", @class = "form-control", @maxlength = "30", required = "required", dataError = "Uma localização é necessária." } })
            @Html.ValidationMessageFor(model => model.locali, "", new { @class = "text-danger" })
        </div>
    </div>


</div>

                                                                                                <hr /> @*-------------------------- Imagens --------------------------*@
                                                                                                                <div class="row">

                                                                                                                    @*----------- Imagem 1 -----------*@
                                                                                                                    <div class="col-12 col-xl-6 p-2 borda-sec-img">

                                                                                                                        <div class="form-group row mb-2">
                                                                                                                            <label class="control-label" style="padding: 0px" for="nomeImg1">Imagem 1:</label>
                                                                                                                            <div class="col-12 col-sm-5">
                                                                                                                                @Html.EditorFor(model => model.nm_img1, new { htmlAttributes = new { id = "nomeImg1", @class = "form-control", @maxlength = "20" } })
                                                                                                                                @Html.ValidationMessageFor(model => model.nm_img1, "", new { @class = "text-danger" })
                                                                                                                            </div>
                                                                                                                            <div class="col-sm-1"></div>
                                                                                                                            <div class="col-12 col-sm-6">
                                                                                                                                <input type="file" class="form-control" accept="image/*" onchange="carregarImg1(event)">
                                                                                                                                @Html.HiddenFor(model => model.base64_img1, new { id = "hiddenCrop1" })
                                                                                                                            </div>
                                                                                                                        </div>

                                                                                                                        <div class="row">
                                                                                                                            <div class="col-12 col-sm-8 mb-2 mb-sm-0 bg-pre-crop">
                                                                                                                                <img id="preCrop1" style="display: block; max-width: 100%;" src="@Url.Action("ObterImgNaView", "Postagens", new { id = Model.id_post, img = 1 })">
                                                                                                                            </div>

                                                                                                                            <div class="col-12 col-sm-4 d-flex flex-column">
                                                                                                                                <div class="posCrop1 mx-auto mb-2" style="overflow: hidden; width: 200px; height: 200px; margin-left: auto;"></div>
                                                                                                                                <button type="button" id="btnCanvas1" class="btn btn-danger">Salvar Imagem</button>
                                                                                                                            </div>
                                                                                                                        </div>

                                                                                                                    </div>

                                                                                                                   

                                                                                                                                <hr /> @*-------------------------- Botões --------------------------*@
                                                                                                                                                <div class="row">
                                                                                                                                                    <div class="col-6 px-2 d-flex justify-content-end">
                                                                                                                                                        @Html.ActionLink("Voltar", "Details", "Publicações", routeValues: new { id = Model.id_public }, htmlAttributes: new { @class = "btn btn-secondary" })
                                                                                                                                                    </div>
                                                                                                                                                    <div class="col-6 px-2">
                                                                                                                                                        <input type="button" id="btnSalvarProduto" value="Salvar" class="btn btn-success" />
                                                                                                                                                    </div>
                                                                                                                                                </div>}